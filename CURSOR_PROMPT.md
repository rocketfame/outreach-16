# Промпт для Cursor: Зафіксований промпт генерації статей

## Контекст

Промпт генерації статей в файлі `lib/articlePrompt.ts` **ЗАФІКСОВАНИЙ** і не повинен змінюватися, окрім параметру кількості слів (`wordCount`).

## Завдання

✅ **ДОЗВОЛЕНО:** Змінювати тільки параметр кількості слів  
❌ **ЗАБОРОНЕНО:** Змінювати будь-які інші частини промпту

## Параметр Word Count

### Логіка:

1. **За замовчуванням**: Якщо `wordCount` не вказано або порожнє → **1500 слів**
2. **Якщо вказано число**: Використовується вказане число
3. **Допустима розбіжність**: ±20 слів від цільового значення

### Приклади:

- `wordCount = ""` або `undefined` → стаття на **1500 слів** (±20, тобто 1480-1520)
- `wordCount = "1200"` → стаття на **1200 слів** (±20, тобто 1180-1220)
- `wordCount = "2000"` → стаття на **2000 слів** (±20, тобто 1980-2020)

### Де знаходиться:

**Файл:** `lib/articlePrompt.ts`

**Рядок 65 (в промпті):**
```
- Write a full outreach article in [[LANGUAGE]]. The target word count is [[WORD_COUNT]] words (acceptable range: ±20 words from the target). Brand and platform names must always be capitalized correctly.
```

**Рядки 333-337 (обробка параметру):**
```typescript
// Calculate word count: use provided wordCount if valid, otherwise default to 1500
const wordCountValue = params.wordCount && params.wordCount.trim() && !isNaN(Number(params.wordCount.trim()))
  ? Number(params.wordCount.trim())
  : 1500; // Default word count
prompt = prompt.replaceAll("[[WORD_COUNT]]", wordCountValue.toString());
```

**Файл:** `app/api/articles/route.ts`

**Рядок 131:**
```typescript
wordCount: brief.wordCount, // Pass wordCount from Project Basics (default: 1500)
```

## Інструкції для AI асистента

### ⚠️ КРИТИЧНО ВАЖЛИВО:

1. **НЕ ВНОСЬ ЗМІНИ** в промпт `lib/articlePrompt.ts` без явного запиту користувача
2. **ЄДИНА ВИНЯТОК:** Можна змінювати логіку обчислення `wordCount` (рядки 333-337), якщо користувач явно просить
3. **ВСІ ІНШІ ЗМІНИ** в промпті заборонені, навіть якщо вони здаються покращеннями

### Якщо користувач просить змінити промпт:

1. **Уточнити:** Чи точно потрібно змінити промпт? (можливо, користувач має на увазі щось інше)
2. **Попереджати:** Нагадати, що промпт зафіксований і зміни можуть вплинути на якість генерації
3. **Задокументувати:** Якщо зміни все ж таки потрібні, оновити `PROMPT_FREEZE_INSTRUCTIONS.md`

### Якщо потрібно змінити wordCount:

✅ **ДОЗВОЛЕНО:**
- Змінити значення за замовчуванням (1500 → інше число)
- Змінити допустиму розбіжність (±20 → інше значення)
- Додати валідацію для wordCount
- Покращити обробку помилок

❌ **ЗАБОРОНЕНО:**
- Змінювати текст промпту про word count (рядок 65)
- Змінювати інші частини промпту

## Поточний стан

✅ Промпт зафіксований  
✅ WordCount працює: за замовчуванням 1500, якщо вказано - використовується вказане значення  
✅ Допустима розбіжність: ±20 слів  
✅ Параметр передається з Project Basics через `brief.wordCount`  

## Перевірка

Після будь-яких змін перевір:
1. Чи працює wordCount за замовчуванням (1500)?
2. Чи працює wordCount з вказаним значенням?
3. Чи не зламався промпт?

## Важливо

**Цей промпт - критично важлива частина системи.** Будь-які зміни можуть вплинути на:
- Якість генерації статей
- Структуру статей
- Використання джерел
- Anchor links
- Brand integration

**Тому зміни дозволені ТІЛЬКИ для wordCount параметру!**

